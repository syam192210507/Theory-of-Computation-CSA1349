#include <stdio.h>
#include <stdbool.h>
#include <string.h>

// Function to check if a given string is generated by the CFG
bool isGeneratedByCFG(char *str);

// Function to match A production
int matchA(char *str);

// Function to match S production
int matchS(char *str);

int main() {
    char inputString[100];

    printf("Enter a string: ");
    scanf("%s", inputString);

    if (isGeneratedByCFG(inputString)) {
        printf("The string \"%s\" belongs to the language defined by the CFG.\n", inputString);
    } else {
        printf("The string \"%s\" does not belong to the language defined by the CFG.\n", inputString);
    }

    return 0;
}

bool isGeneratedByCFG(char *str) {
    int len = strlen(str);
    return len >= 5 && matchS(str) == len;
}

int matchA(char *str) {
    if (strncmp(str, "a", 1) == 0) {
        return 1 + matchA(str + 1);
    } else if (strncmp(str, "b", 1) == 0) {
        return 1 + matchA(str + 1);
    } else {
        return 0; // Îµ production
    }
}

int matchS(char *str) {
    int len = strlen(str);
    if (len < 5) {
        return 0; // S production cannot match if length is less than 5
    }

    // Check if AaAaA pattern
    if (matchA(str) > 0 && strncmp(str + matchA(str), "a", 1) == 0 &&
        matchA(str + matchA(str) + 1) > 0 && strncmp(str + matchA(str) + 1 + matchA(str + matchA(str) + 1), "a", 1) == 0 &&
        matchA(str + matchA(str) + 1 + matchA(str + matchA(str) + 1) + 1) > 0) {
        return matchA(str) + 1 + matchA(str + matchA(str) + 1) + 1 + matchA(str + matchA(str) + 1 + matchA(str + matchA(str) + 1) + 1);
    } else {
        return 0; // S production doesn't match
    }
}
